name: Generate Metrics

on:
  schedule:
    - cron: "0 */12 * * *"
  workflow_dispatch:
  push:
    branches: ["main"]

permissions:
  contents: write

jobs:
  github-metrics:
    runs-on: ubuntu-latest
    steps:
      - name: Generate metrics
        uses: lowlighter/metrics@latest
        with:
          token: ${{ secrets.METRICS_TOKEN }}
          user: Rrrapce
          template: classic
          # ostavi SAMO 'header' da bi imao "Joined GitHub" i "Contributed to"
          base: header
          config_timezone: Europe/Sarajevo
          filename: github-metrics.svg
          committer_token: ${{ github.token }}

          # Kompaktna aktivnost: samo dodano/obrisano (bez velikog “Activity” bloka)
          plugin_lines: yes
          plugin_lines_history_limit: 12

          # Skidamo sve što si označio crveno:
          # (NIŠTA od sljedećeg ne uključujemo)
          # plugin_followup: no            # (issues/PR status)
          # plugin_pagespeed: no           # (PageSpeed)
          # plugin_habits: no              # (recent coding habits grafovi)
          # plugin_languages: no           # (ostaje po želji)
          # plugin_activity: no            # (veliki “Activity” listing)

          # Ako želiš Most used languages i WakaTime zadrži:
          plugin_languages: yes
          plugin_languages_sections: most-used
          plugin_languages_limit: 10
          plugin_languages_details: percentage
          plugin_languages_threshold: 1%
          plugin_languages_other: true
          plugin_languages_aliases: "C++:CPP, C#:CSharp"

          plugin_wakatime: yes
          plugin_wakatime_token: ${{ secrets.WAKATIME_API_KEY }}
          plugin_wakatime_days: 7
          plugin_wakatime_sections: time, projects, languages, editors
          plugin_wakatime_limit: 5
          plugin_wakatime_url: https://wakatime.com

          # (ostali tvoji pluginovi koje želiš, npr. achievements, topics…)
          plugin_achievements: yes
          plugin_achievements_threshold: C
          plugin_achievements_secrets: yes
          plugin_achievements_display: compact

          plugin_topics: yes
          plugin_topics_mode: mastered
          plugin_topics_sort: stars
          plugin_topics_limit: 12
          plugin_topics_edges: rounded
          plugin_topics_colors: github
