name: Generate Metrics

on:
  schedule:
    - cron: "0 */12 * * *"   # svaka 12h
  workflow_dispatch:
  push:
    branches: ["main"]

permissions:
  contents: write   # da mo≈æe committati SVG

jobs:
  github-metrics:
    runs-on: ubuntu-latest
    steps:
      - name: Generate metrics
        uses: lowlighter/metrics@latest
        with:
          # Osnovno
          token: ${{ secrets.METRICS_TOKEN }}         # PAT: read:user (+ repo ako ≈æeli≈° privatne)
          user: Rrrapce                         # <-- promijeni ako je drugaƒçije
          template: classic
          base: header, activity, community, repositories
          config_timezone: Europe/Sarajevo

          # Commit output
          filename: github-metrics.svg
          committer_token: ${{ github.token }}        # koristi ugraƒëeni token s gore datim permissions

          # üîπ WakaTime
          plugin_wakatime: yes
          plugin_wakatime_token: ${{ secrets.WAKATIME_API_KEY }}
          plugin_wakatime_days: 7
          plugin_wakatime_sections: time, projects, languages, editors
          plugin_wakatime_limit: 5
          plugin_wakatime_url: https://wakatime.com

          # üîπ Streaks / ritam (isocalendar)
          plugin_isocalendar: yes
          plugin_isocalendar_duration: full-year

          # üîπ Top jezici
          plugin_languages: yes
          plugin_languages_limit: 8
          plugin_languages_sections: most-used
          plugin_languages_aliases: "C++:CPP, C#:CSharp"
          plugin_languages_threshold: 1%
          plugin_languages_details: percentage
          plugin_languages_recent_days: 30
          plugin_languages_other: true

          # üîπ Achievements
          plugin_achievements: yes
          plugin_achievements_threshold: C
          plugin_achievements_secrets: yes
          plugin_achievements_display: compact
